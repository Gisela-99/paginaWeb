<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ejercicios: DOM</title>
</head>
<style>
  
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
    }
    input#mensaje{
      width: 500px;
    }

</style>
<body>
  <h1>Ejercicios: DOM</h1>
  <form action="" onsubmit="validarFormulario(event)">

    <div>
      <label for="nombre">Nombre del cliente:</label>
      <input type="text" id="nombre" required placeholder="Gisela" />
    </div>

    <div>
      <label for="material">Material:</label>
      <select name="material" id="material">
        <option value="Madera">Madera</option>
        <option value="Plastico" selected>Plástico</option>
        <option value="Metal">Metal</option>
      </select>
    </div>
    <div>
      <label for="dimension">Seleccione unas dimensiones para la caja:</label>
      <input type="radio" colores name="dimension"> Diminuta <br> 
      <input type="radio" value="Pequeña" name="dimension"> Pequeña <br>
      <input type="radio" value="Grandes" name="dimension" checked> Grandes <br>
    </div>
    <div>
      <label for="comentario"> Comentarios:</label>
      <textarea name="cometario" id="comentario"></textarea>
    </div>
    <div>
      <button type="button">Enviar</button>
    </div>
    <div>
      <input type="text" id="mensaje" disabled>
    </div>
  </form>

  <script>
     // detectar pulsación del botón de enviar 

     // opción 1: document.querySelector('button').onclick = confeccionarMensaje
        document.querySelector('button').onclick = function () {
        validarFormulario()
      }
     // función para confeccionar el mensaje 

    /*opción 1:  function confeccionarMensaje (){
        //window.alert('hola')
        // limpiar mensaje anterior 
          document.querySelector('#mensaje').value = '';
        // recuperar datos del formulario 
          let nombre = document.querySelector('#nombre').value.trim() 
          let material = document.querySelector('#material').value.toLowerCase()
          let dimension = document.querySelector ('[name=dimension]:checked').value
          let comentario = document.querySelector('#comentario').value

        // validar el nombre, material y dimensión informados 
        if(nombre == ''){
          window.alert(`El nombre es obligatorio`)
          return;
        }
           //undefined, null, '', 0, false --- false
        if(!dimension){ // (dimension === undefined)
          window.alert('Te has paso de listo y te hemos pillado')
          return
        }

        //confeccionar el mensaje 
        let mensaje = nombre + ' ha pedido una caja de ' + material + ' con unas dimensiones ' + dimension + '. ' + comentario;
        //----opción 2: let mensaje = `${nombre} ha pedido una caja de ${material} con unas dimensiones ${dimension}. ${comentario}`

        //enviar el mensaje al formulario
        document.querySelector('mensaje').value = mensaje

      }*/

      function validarFormulario(event){

            // limpiar mensaje anterior 
            document.querySelector('#mensaje').value = '';
            // recuperar datos del formulario 
          let nombre = document.querySelector('#nombre').value.trim().replace(/\s+/g, ' ') //replace(/\s+/g, " ")-- se llama expresiones regulares
          let material = document.querySelector('#material').value.toLowerCase()
          let dimension =document.querySelector ('[name=dimension]:checked')?.value //window.alert(dimension) . ? = quiere decir cabe la posibilidad, es como una cosa opcional. para que no tengas errores en la consola. 
          let comentario = document.querySelector('#comentario').value.trim()
            
            // validar el nombre, material y dimensión informados 
            try{
              let errores = ''
              if (!nombre) { // if (nombre == '')
                errores = errores + 'Nombre obligatoriochecks'
            
              } 

              if (!material) {
                errores += 'Material obligatorio\n'
            
              }
              if (!dimension) {
                errores += 'Dimension obligatorio\n'
              }

              if (!comentario) {
                errores += 'Comentario obligatorio\n'
              }

              if (errores) {
                throw (errores)
              }
            } catch (error) {
              window.alert(error)
            }

            
             //confeccionar el mensaje 
          let frase = nombre + ' ha pedido una caja de ' + material + ' con unas dimensiones ' + dimension + '. ' + comentario;
          // enviar el mensaje al formulario
          document.querySelector('#mensaje').value = frase; 
      } 

      /*ELIMINAR LOS ESPACIOS EN BLANCO INECESARIOS EN EL CENTRO

      let nombre = document.querySelector('#nombre').value.trim()
        // while(mientras sea cierta no se sabe cuántas veces de va ejecutar)  for(interacion desde 0 hasta un contador final, es un número que se ejecuta si sa sabe cuántas se va ejecutar)
        
        nombre =  eliminarEspacios(texto){
          while (texto.indexOf ('  ') >= 0){
            texto = texto.replace(' ', ' ')
          }
          return texto;
        }
      OPCION 2:
      function eliminarEspaciosConsecutivos(texto) {
        while (texto.includes("  ")) {
          texto = texto.split("  ").join(" ");
        }
        return texto.trim();
      }

      */

  

  </script>
</body>
</html>